---
layout: post
title: 【Weekly Report】2020.04.19 ~ 2020.04.25
date: 2020-04-19 07:07
tags:
    - Weekly
---

# 全年一共52个日历周，本周是第18周

Your 2020 usage:34.6%

```
[##################                                                  ]
```

# 防护升级！兼职安全工程师如何假装很熟练地给网站做安全检查

从14年起，我便开始维护我的个人主页plusplus7.com。因为本来就是业余时间维护，所以没有弄得太复杂。总体来说，就是一个Python + Redis + MySQL的小网站，还不支持HTTPS。

被PL爷吐槽“我去上个厕所的功夫就能给你黑掉”，于是我便做了少些安全加固，最重要的一点就是加上了HTTPS。

当然，用了HTTPS也并不代表网站就是安全的。特别是对于用户来说，HTTPS可以保证通信线路安全，但是无法防止服务端的主观恶意。

HTTPS的配置也并不简单。那么有没有什么工具可以简单快速地对网站做安全检查呢？

### Qualys SSL Labs

Qualys公司提供的SSL Labs是一套针对SSL扫描分析的文档和工具。其中便提供了对服务器进行扫描分析的[SSL Server Test](https://www.ssllabs.com/ssltest/index.html)。

![QualysMain](https://raw.githubusercontent.com/plusplus7/solutions/master/weekly/2020/miscs/week15/QualysSslMain.png)


SSL Server Test的扫描大致包含四个步骤：

1. 查看证书是否合法
2. 扫描服务器的SSL配置，比如协议，密钥交换算法，加密算法等
3. 根据扫描结果得出分数，从0到100
4. 最后再根据分数和一套特殊规则，来给出最后的评级，从A到F。

有的规则可能会导致评级下降，而有的规则会提升评级。当然，还有一些特殊的情况，也会给出M级：证书名不匹配和T级：证书不被信任。

大概过1分钟左右，检查完成。

最终，我的网站拿到了B级的评价！

![Qualys_plusplus7com](https://raw.githubusercontent.com/plusplus7/solutions/master/weekly/2020/miscs/week15/Qualys_plusplus7com.png)

扫描报告分为几个部分，每一部分包含若干子项目。存在安全风险的项目会被标记为橙色。

### Part 1 证书

![Qualys_plusplus7com](https://raw.githubusercontent.com/plusplus7/solutions/master/weekly/2020/miscs/week15/Qualys_Part1Certificate.png)

第一部分是证书。

Subject, Common name, Alternative names, Serial Number...这些都是普通的证书应该有的属性。

#### Key

这一栏的信息表明，生成这份证书的Key是2048位的RSA密钥，其中E=65537。

#### Weak Key(Debian)

Linux系统的Debian发行版在2006发布的OpenSSL包中包含一个bug。这个bug使得Debian以及其衍生系统会生成较弱的密钥。这个bug直到2008年才被修复。

这项检测便是针对这个bug来检查证书中是否使用了此类较弱的密钥。

#### Issuer

我的这份证书是由Let's Encryt颁发的，所以Issuer这一栏是Let's Encryt证书机构的信息。

#### Signature algorithm

这里的SHA256WithRSA，是指浏览器需通过SHA256算法计算证书摘要+RSA私钥签名来验证证书链。


