---
layout: post
title: 【Weekly Report】2019.9.30 ~ 2019.10.05
date: 2019-9-30 07:07
tags:
    - Weekly
---

嗨，这是第40周。

这周大部分时间是国庆假期，准备利用七天时间好好做东西。

# MFA: Why so important?

密码是一种有着几千年历史的技术

早在古希腊雅典和斯巴达之间的伯罗奔尼撒战争中

雅典间谍便是使用腰带传送密码情报

在互联网如此发达的今天

用户名和口令

是如今最常见的身份验证方式

虽然口令和密码并不完全相等

但是出于翻译问题和历史原因，人们更习惯于称呼这一身份验证方式为用户名和密码

在互联网刚刚开始发展时

这一古老的技术便暴露出了许多问题

黑客们可以通过各种方式窃取到用户的密码

且以此获利

当有密码泄漏时，用户不能够及时得知

系统也无法立刻检测到

因此，密码盗用成为了黑客最偏好的攻击手段之一

多达95%的互联网应用入侵攻击中使用到了这一技术

基于密码的单因素身份认证并不能保护好我们的账户

于是我们便考虑多因素身份认证

生活中常见的多因素身份认证，有例如

网络游戏公司为保护玩家账户所推出的各种密保，令牌机制等

以及银行提供的各种物理USB盘

看起来，多因素身份认证在生活中也是无处不在

熟悉多因素身份认证，乃至掌握其工作原理

对于生活在21世纪的互联网工程师来说是一项必要技能

使用多种因素来认证身份用几种方式，例如

提供只有你所知道的东西，比如密码，或者说是口令

提供你的生物特征，比如指纹，FaceID

借助现代密码学的技术，证明你拥有某个东西也可以作为身份认证的依据

基于PC/SC协议，我们可以通过USB接口和读卡器等

将我们所拥有的USB盘或物理卡片插入计算机

这些设备通常包含有认证机构颁发的数字证书

以此，我们便可以完成基于证书的客户端和服务端双向身份认证。

除此之外，提供6-8位数字口令也是一种常见的认证方式

用户端先接受服务端分发的密钥，记为K

并且两边维护同一个计数器，记为C

使用散列消息验证码算法，我们可得到一个中间结果值

我们去中间结果的最后一个字节为索引

以此在中间结果中，索引出31个比特的数据，将其组成一个无符号整数

最后通过模运算得出一个特定位数的整数

便是我们需要的数字口令

由于有散列算法的特性，通过中间结果值，我们无法倒推出密钥K和计数器C的值

而我们每一次计算之后

计数器的值都同时向后增加

这样便是得，我们每一次得到的中间结果值都不一样

最后也使得每一次数字口令都不一样

但是这样也带来一个新问题

由于现实中的各种原因，客户端和服务端的计数器并不是一直能够保持同步

这样会带来由于计数器不同步而导致的额外计算开销

为了解决这一问题，我们有基于时间的TOTP算法

基于HOTP算法，我们将计数器替换为时间计数器

我们规定一个时间周期，T0，通常为30秒

再规定一个起始时间，通常为UTC时间的1970年1月1日

用起始时间到当前时间的秒数，除以时间周期，再向下取整

我们便能得到一个每个时间周期都不同的时间计数器

将其带入HOTP算法，便能够解决计数器不同步的问题

这也是为什么有些多因素身份认证软件上

数字口令每隔30秒更新的实现原理

有了多因素身份认证

并不意味着我们的账户是绝对安全的

生物特征可能会被复制

手机短信验证码可能会被偷取

美国国家标准与技术研究院早已提出要废除基于手机短信的多因素身份认证方案

这些身份认证方案只是增加了黑客盗取账户的成本

除此之外，服务端也为用户提供操作审计，登录检测等保护措施

我们将在后面的节目里

分享更多关于信息安全的学习笔记和总结

欢迎评论，支持和转发

